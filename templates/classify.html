{% extends "base.html" %}

{% block title %}2D Classification - TumorVision{% endblock %}

{% block content %}
<div class="glass" style="padding: 3rem; border-radius: 20px; max-width: 800px; margin: 0 auto; margin-top: 2rem;">
    <h2 style="margin-bottom: 2rem; text-align: center;">2D MRI Classification</h2>

    <form id="classifyForm">
        <div class="upload-area" id="dropArea" onclick="document.getElementById('fileInput').click()">
            <i class="fa-solid fa-cloud-arrow-up upload-icon"></i>
            <p style="font-size: 1.2rem; margin-bottom: 0.5rem;">Drag & Drop MRI Image</p>
            <p style="color: var(--text-muted);">or <span
                    style="color: var(--primary); text-decoration: underline;">browse files</span></p>
            <input type="file" name="file" id="fileInput" accept="image/*"
                style="opacity: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; cursor: pointer;">
        </div>

        <div id="previewContainer" style="text-align: center; margin-bottom: 2rem; display: none;">
            <img id="imagePreview" src="" alt="Preview"
                style="max-width: 100%; max-height: 300px; border-radius: 10px; border: 2px solid var(--border);">
            <p id="fileName" style="margin-top: 0.5rem; color: var(--text-muted);"></p>
        </div>

        <div style="text-align: center;">
            <button type="submit" class="btn btn-primary" id="analyzeBtn" disabled>Analyze Image</button>
        </div>
    </form>

    <div class="loader" id="loader"></div>

    <div id="resultContainer" class="glass"
        style="margin-top: 2rem; padding: 2rem; border-radius: 12px; display: none; text-align: center; background: rgba(59, 130, 246, 0.1);">
        <h3 style="color: var(--text-main); margin-bottom: 1rem;">Analysis Result</h3>
        <p style="font-size: 1.5rem; font-weight: 700;">
            Prediction: <span id="predictionResult" style="color: var(--accent);">--</span>
        </p>
        <p style="color: var(--text-muted); margin-top: 0.5rem;">Confidence: <span id="confidenceResult">--</span></p>
    </div>

    <div style="text-align: center; margin-top: 3rem; display: flex; gap: 1rem; justify-content: center;">
        <a href="/" class="btn btn-primary" style="background: transparent; border: 1px solid var(--primary);">Upload
            Another</a>

        <button id="downloadReportBtn" class="btn btn-primary"
            style="background: #ef4444; border: none; display: none;">
            <i class="fa-solid fa-file-pdf"></i> &nbsp;Download Medical Report
        </button>
    </div>
</div>
{% endblock %}